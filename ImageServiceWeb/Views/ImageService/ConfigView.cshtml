@model ImageServiceWeb.Models.ConfigInfo

@{
    ViewBag.Title = "ConfigView";
}

<link href="~/Css/config-view.css" rel="stylesheet" type="text/css" />

<h2>ConfigView</h2>
<table class="table">
    <tr>
        <td>
            Source name:
        </td>
        <td>
            <p type="text" id="sourceName" size="5">
                @Html.DisplayFor(model => model.SourceName)
            </p>
        </td>
    </tr>
    <tr>
        <td>
            Log name:
        </td>
        <td>
            <p type="text" id="logName" size="5">
                @Html.DisplayFor(model => model.LogName)
            </p>
        </td>
    </tr>
    <tr>
        <td>
            Output directory:
        </td>
        <td>
            <p type="text" id="outputDirectory" size="5">
                @Html.DisplayFor(model => model.OutputDir)
            </p>
        </td>
    </tr>
    <tr>
        <td>
            Thumbnail size:
        </td>
        <td>
            <p type="text" id="thumbnailSize" size="5">
                @Html.DisplayFor(model => model.ThumbnailSize)
            </p>
        </td>
    </tr>
</table>
<tr>
    Handlers:
</tr>
<ul class="link-table">
    @{
        if (Model.Handlers != null && Model.Handlers.Count != 0)
        {
            foreach (var item in Model.Handlers)
            {
                if (item.DirPath != "")
                {
                    <li class="path" id="handlerLink" data-item="@item">
                        @Html.ActionLink(item.DirPath, "Delete", new { path = item.DirPath })
                        <!--<a data-toggle="modal" href="#myModal">Open Modal</a>-->
                    </li>
                }
            }
        }
    }
</ul>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete the handler?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn bg-warning" data-dismiss="modal">No</button>
                <button type="button" class="btn btn-success" data-dismiss="modal">Yes</button>
            </div>
        </div>
    </div>
</div>

<script>
    $("#handlerLink").click(function (event) {
        var button = $(event.relatedTarget);
        var handler = button.data('item');

        var url = '@Url.Action("Delete", "ImageService", new { handlerToDelete = "temp"})'
        var replace = url.replace('temp', handler);
    });
</script>